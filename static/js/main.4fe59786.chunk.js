(this["webpackJsonpcards-nya-front-2-0"]=this["webpackJsonpcards-nya-front-2-0"]||[]).push([[0],{21:function(e,t,n){e.exports={inputNya:"EditableSpanNya_inputNya__2oQ6P",spanNya:"EditableSpanNya_spanNya__139Ng"}},33:function(e,t,n){e.exports={inputNya:"InputNya_inputNya__2oR82"}},34:function(e,t,n){e.exports={buttonNya:"ButtonNya_buttonNya__1V5iD"}},35:function(e,t,n){e.exports={link:"LinkNya_link__3jo8H"}},39:function(e,t,n){e.exports=n(69)},44:function(e,t,n){},45:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),s=n.n(c),o=(n(44),n(45),n(8)),u=n(3),i=n(4),l=n(10),d=n(33),f=n.n(d),p=a.a.memo((function(e){var t=e.onChange,n=e.onChangeText,c=e.onChangeChecked,s=e.info,o=Object(l.a)(e,["onChange","onChangeText","onChangeChecked","info"]),u=Object(r.useCallback)((function(e){t&&t(e),n&&n(e.currentTarget.value),c&&c(e.currentTarget.checked)}),[t,n,c]);return s&&console.log("render InputNya-"+s),a.a.createElement("input",Object.assign({onChange:u,className:f.a.inputNya},o))})),m=n(34),g=n.n(m),b=a.a.memo((function(e){var t=e.info,n=Object(l.a)(e,["info"]);return t&&console.log("render ButtonNya-"+t),a.a.createElement("button",Object.assign({className:g.a.buttonNya},n))})),v=n(35),E=n.n(v),O=a.a.memo((function(e){var t=e.info,n=Object(l.a)(e,["info"]);return t&&console.log("render LinkNya-"+t),a.a.createElement(o.b,Object.assign({className:E.a.link},n))})),h=a.a.memo((function(e){var t=e.email,n=e.setEmail,r=e.pass,c=e.setPass,s=e.remember,o=e.setRemember,u=e.signIn,i=e.loading;return console.log("render Login"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(p,{info:"email",value:t,onChangeText:n})),a.a.createElement("div",null,a.a.createElement(p,{info:"pass",value:r,onChangeText:c})),a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement(p,{type:"checkbox",info:"remember",checked:s,onChangeChecked:o}),"remember me")),a.a.createElement("div",null,a.a.createElement(O,{to:Le.FORGOT,info:"forgot in login"},"forgot?")),a.a.createElement("div",null,a.a.createElement(b,{info:"sign in",onClick:u,disabled:i},"sign in")))})),k=n(1),j=n.n(k),y=n(2),w=function(e){return{type:"login/SET_LOADING",loading:e}},S=function(e){return{type:"login/SET_SUCCESS",success:e}},x=function(e){return{type:"login/SET_ERROR",error:e}},C=n(5),_=function(){var e=Object(y.a)(j.a.mark((function e(t,n,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),a=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",n(a),console.log("Nya, "+r+" Error!",Object(C.a)({},e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r){return e.apply(this,arguments)}}(),P=n(37),N=n.n(P).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),T={signIn:function(){var e=Object(y.a)(j.a.mark((function e(t,n,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth/login",{email:t,password:n,rememberMe:r});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},R=function(e){return{type:"profile/SET_LOADING",loading:e}},I=function(e){return{type:"profile/SET_SUCCESS",success:e}},L=function(e){return{type:"profile/SET_ERROR",error:e}},U=function(e){return{type:"profile/SET_USER",user:e}},G=a.a.memo((function(){var e=Object(r.useState)("nya-admin@nya.nya"),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)("1qazxcvBG"),o=Object(i.a)(s,2),l=o[0],d=o[1],f=Object(r.useState)(!1),p=Object(i.a)(f,2),m=p[0],g=p[1],b=Object(u.b)(),v=Object(r.useCallback)((function(){return b(function(e,t,n){return function(){var r=Object(y.a)(j.a.mark((function r(a){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(w(!0)),r.next=3,_(Object(y.a)(j.a.mark((function r(){var c;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T.signIn(e,t,n);case 2:c=r.sent,a(S(!0)),a(U(c)),console.log("Nya, Login Success!",c);case 6:case"end":return r.stop()}}),r)}))),(function(e){return a(x(e))}),"Login");case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(n,l,m))}),[n,l,m,b]),E=Object(u.c)((function(e){return e.login})).loading;return console.log("render LoginContainer"),a.a.createElement(h,{email:n,setEmail:c,pass:l,setPass:d,remember:m,setRemember:g,signIn:v,loading:E})})),A=a.a.memo((function(e){var t=e.loading,n=e.success,r=e.error,c=e.first,s=e.info;return s&&console.log("render Status-"+s),c?a.a.createElement("div",null,a.a.createElement("br",null)):a.a.createElement(a.a.Fragment,null,t?a.a.createElement("div",{style:{color:"orange"}},"loading..."):r?a.a.createElement("div",{style:{color:"red"}},r):n?a.a.createElement("div",{style:{color:"lime"}},"Success!"):a.a.createElement("div",null,a.a.createElement("br",null)))})),D=a.a.memo((function(e){var t=e.first,n=Object(u.c)((function(e){return e.login})),r=n.loading,c=n.success,s=n.error;return console.log("render LoginStatus"),a.a.createElement(A,{loading:r,success:c,error:s,info:"login",first:t})})),F=n(11),q=function(){var e=Object(u.c)((function(e){return e.login})),t=e.success,n=e.error,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(!0),f=Object(i.a)(d,2),p=f[0],m=f[1],g=Object(u.b)();return Object(r.useEffect)((function(){p?((t||n)&&g(x("")),m(!1)):t&&!o&&setTimeout((function(){return l(!0)}),500)}),[p,t,n,g,m,o,l]),console.log("render LoginPage"),o&&t&&!p?a.a.createElement(F.a,{to:Le.PROFILE}):a.a.createElement("div",null,"login",a.a.createElement(D,{first:p}),a.a.createElement(G,null),a.a.createElement(O,{to:Le.REGISTER,info:"register in login"},"register"))},M=a.a.memo((function(e){var t=e.email,n=e.setEmail,r=e.pass,c=e.setPass,s=e.pass2,o=e.setPass2,u=e.signUp,i=e.loading;return console.log("render Register"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(p,{info:"email",value:t,onChangeText:n})),a.a.createElement("div",null,a.a.createElement(p,{info:"pass",value:r,onChangeText:c})),a.a.createElement("div",null,a.a.createElement(p,{info:"pass confirm",value:s,onChangeText:o})),a.a.createElement("div",null,a.a.createElement(b,{info:"sign up",onClick:u,disabled:i},"sign up")))})),B=function(e){return{type:"register/SET_LOADING",loading:e}},K=function(e){return{type:"register/SET_SUCCESS",success:e}},V=function(e){return{type:"register/SET_ERROR",error:e}},$={signUp:function(){var e=Object(y.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth/register",{email:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},H=a.a.memo((function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),o=Object(i.a)(s,2),l=o[0],d=o[1],f=Object(r.useState)(""),p=Object(i.a)(f,2),m=p[0],g=p[1],b=Object(u.b)(),v=Object(r.useCallback)((function(){return b(function(e,t,n){return function(){var r=Object(y.a)(j.a.mark((function r(a){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(B(!0)),r.next=3,_(Object(y.a)(j.a.mark((function r(){var c;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t===n){r.next=4;break}a(V("Passwords don't match!")),r.next=9;break;case 4:return r.next=6,$.signUp(e,t);case 6:c=r.sent,a(K(!0)),console.log("Nya, Register Success!",c);case 9:case"end":return r.stop()}}),r)}))),(function(e){return a(V(e))}),"Register");case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(n,l,m))}),[n,l,m,b]),E=Object(u.c)((function(e){return e.register})).loading;return console.log("render RegisterContainer"),a.a.createElement(M,{email:n,setEmail:c,pass:l,setPass:d,pass2:m,setPass2:g,signUp:v,loading:E})})),J=a.a.memo((function(e){var t=e.first,n=Object(u.c)((function(e){return e.register})),r=n.loading,c=n.success,s=n.error;return console.log("render RegisterStatus"),a.a.createElement(A,{loading:r,success:c,error:s,info:"register",first:t})})),W=function(){var e=Object(u.c)((function(e){return e.register})),t=e.success,n=e.error,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(!0),f=Object(i.a)(d,2),p=f[0],m=f[1],g=Object(u.b)();return Object(r.useEffect)((function(){p?((n||t)&&g(V("")),m(!1)):t&&!o&&setTimeout((function(){return l(!0)}),500)}),[p,t,n,g,m,o,l]),console.log("render RegisterPage"),o&&t&&!p?a.a.createElement(F.a,{to:Le.LOGIN}):a.a.createElement("div",null,"register",a.a.createElement(J,{first:p}),a.a.createElement(H,null),a.a.createElement(O,{to:Le.LOGIN,info:"login in register"},"login"))},z={getMe:function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(y.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put("/auth/me",{name:t,avatar:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delete("/auth/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUsers:function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/social/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendGeneralChatMessage:function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/social/general/message",{message:"some message"});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getGeneralChatMessages:function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/social/general/message");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Q=a.a.memo((function(e){var t=e.first,n=Object(u.c)((function(e){return e.profile})),r=n.loading,c=n.success,s=n.error;return console.log("render ProfileStatus"),a.a.createElement(A,{loading:r,success:c,error:s,info:"profile",first:t})})),X=n(21),Y=n.n(X),Z=a.a.memo((function(e){var t=e.onBlur,n=e.autoFocus,c=e.spanProps,s=e.info,o=Object(l.a)(e,["onBlur","autoFocus","spanProps","info"]),u=c||{onDoubleClick:void 0,children:void 0},d=u.onDoubleClick,f=(u.children,Object(l.a)(u,["onDoubleClick","children"])),m=Object(r.useState)(!1),g=Object(i.a)(m,2),b=g[0],v=g[1],E=Object(r.useCallback)((function(e){v(!1),t&&t(e)}),[v,t]),O=Object(r.useCallback)((function(e){v(!0),d&&d(e)}),[v,d]);return s&&console.log("render EditableSpanNya-"+s),a.a.createElement(a.a.Fragment,null,b?a.a.createElement(p,Object.assign({onBlur:E,autoFocus:!(!1===n),info:"EditableSpanNya-"+s,className:Y.a.inputNya},o)):a.a.createElement("span",Object.assign({onDoubleClick:O,className:Y.a.spanNya},f),o.value))})),ee=a.a.memo((function(e){var t=e.loading,n=e.avatar,r=e.setAvatar,c=e.name,s=e.setName,o=e.update,u=e.logOutCallback;return console.log("render Profile"),a.a.createElement("div",null,a.a.createElement("img",{src:n,alt:"avatar",height:"200px"}),a.a.createElement("div",null,"avatar url: ",a.a.createElement(Z,{value:n,onChangeText:r,onBlur:o,info:"avatar-url"})),a.a.createElement("div",null,"name: ",a.a.createElement(Z,{value:c,onChangeText:s,onBlur:o,info:"name"})),a.a.createElement(b,{onClick:u,disabled:t},"LogOut"))})),te={_id:"0",email:"fake",name:"fake",publicCardPacksCount:0,created:new Date,updated:new Date,isAdmin:!1,verified:!1,rememberMe:!1},ne={loading:!1,success:!1,error:"",user:te},re=a.a.memo((function(){var e=Object(u.c)((function(e){return e.profile})),t=e.user,n=e.loading,c=Object(r.useState)(t.name),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(t.avatar||""),f=Object(i.a)(d,2),p=f[0],m=f[1],g=Object(u.b)(),b=Object(r.useCallback)((function(){n?(l(t.name),m(t.avatar||"")):g(function(e,t){return function(){var n=Object(y.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(R(!0)),n.next=3,_(Object(y.a)(j.a.mark((function n(){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.updateUser(e,t);case 2:a=n.sent,r(U(a.updatedUser)),r(I(!0)),console.log("Nya, updateUser Success!",a);case 6:case"end":return n.stop()}}),n)}))),(function(e){return r(L(e))}),"updateUser");case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(o,p))}),[g,o,p,n,l,m,t]),v=Object(r.useCallback)((function(){return g(function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(R(!0)),e.next=3,_(Object(y.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.logOut();case 2:n=e.sent,t(U(te)),t(I(!0)),console.log("Nya, logOut Success!",n);case 6:case"end":return e.stop()}}),e)}))),(function(e){return t(L(e))}),"logOut");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[g]);return console.log("render ProfileContainer"),a.a.createElement(ee,{loading:n,avatar:p,setAvatar:m,name:o,setName:l,update:b,logOutCallback:v})})),ae=function(){var e=Object(u.c)((function(e){return e.profile})),t=e.success,n=e.error,c=Object(r.useState)(!0),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(u.b)();Object(r.useEffect)((function(){o&&((n||t)&&d(L("")),l(!1))}),[o,t,n,d,l]);return console.log("render ProfilePage"),a.a.createElement("div",null,"ProfilePage",a.a.createElement(Q,{first:o}),a.a.createElement(re,null))},ce=a.a.memo((function(e){var t=e.children,n=Object(l.a)(e,["children"]),c=Object(u.c)((function(e){return e.profile})),s=c.user,o=c.error,d=c.success,f=Object(r.useState)(!0),p=Object(i.a)(f,2),m=p[0],g=p[1],b=Object(r.useState)(!1),v=Object(i.a)(b,2),E=v[0],O=v[1],h=Object(r.useState)("0"===s._id),k=Object(i.a)(h,2),w=k[0],S=k[1],x=Object(u.b)();return Object(r.useEffect)((function(){m?((d||o)&&x(L("")),"0"===s._id&&x(function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(R(!0)),e.next=3,_(Object(y.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.getMe();case 2:n=e.sent,t(U(n)),t(I(!0)),console.log("Nya, getMe Success!",n);case 6:case"end":return e.stop()}}),e)}))),(function(e){return t(L(e))}),"getMe");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g(!1)):(!E&&(w&&o||!w&&"0"===s._id)&&setTimeout((function(){return O(!0)}),1500),d&&w&&S(!1))}),[m,g,s._id,O,d,o,x,E,w,S]),E?a.a.createElement(F.a,{to:Le.LOGIN}):w?a.a.createElement("div",null,"spin... ",o):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",n,t))})),se=a.a.memo((function(e){var t=e.first,n=Object(u.c)((function(e){return e.forgot})),r=n.loading,c=n.success,s=n.error;return console.log("render ForgotStatus"),a.a.createElement(A,{loading:r,success:c,error:s,info:"forgot",first:t})})),oe=a.a.memo((function(e){var t=e.email,n=e.setEmail,r=e.forgot,c=e.loading;return console.log("render Forgot"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(p,{info:"email",value:t,onChangeText:n})),a.a.createElement("div",null,a.a.createElement(b,{info:"forgot-send",onClick:r,disabled:c},"send")))})),ue=function(e){return{type:"forgot/SET_LOADING",loading:e}},ie=function(e){return{type:"forgot/SET_SUCCESS",success:e}},le=function(e){return{type:"forgot/SET_ERROR",error:e}},de={forgot:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth/forgot",{email:t,from:"test-front-admin <ai73a@yandex.by>",message:"\n<div style=\"background-color: lime; padding: 15px\">\npassword recovery link: \n<a href='http://localhost:3000/#/set-new-password/$token$'>link</a>\n</div>\n"});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fe=a.a.memo((function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(u.b)(),o=Object(r.useCallback)((function(){return s(function(e){return function(){var t=Object(y.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ue(!0)),t.next=3,_(Object(y.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.forgot(e);case 2:r=t.sent,n(ie(!0)),console.log("Nya, Forgot Success!",r);case 5:case"end":return t.stop()}}),t)}))),(function(e){return n(le(e))}),"Forgot");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))}),[n,s]),l=Object(u.c)((function(e){return e.forgot})).loading;return console.log("render ForgotContainer"),a.a.createElement(oe,{email:n,setEmail:c,forgot:o,loading:l})})),pe=function(){var e=Object(u.c)((function(e){return e.forgot})),t=e.success,n=e.error,c=Object(r.useState)(!0),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(u.b)();return Object(r.useEffect)((function(){o&&((t||n)&&d(le("")),l(!1))}),[o,t,n,d,l]),console.log("render ForgotPage"),a.a.createElement("div",null,"forgot",a.a.createElement(se,{first:o}),t?a.a.createElement("div",null,"click the link in the message in your email"):a.a.createElement(fe,null),a.a.createElement("div",null,a.a.createElement(O,{to:Le.LOGIN,info:"login in forgot"},"login")))},me=a.a.memo((function(e){var t=e.first,n=Object(u.c)((function(e){return e.setPass})),r=n.loading,c=n.success,s=n.error;return console.log("render SetPassStatus"),a.a.createElement(A,{loading:r,success:c,error:s,info:"setPass",first:t})})),ge=a.a.memo((function(e){var t=e.pass,n=e.setPass,r=e.pass2,c=e.setPass2,s=e.setPassCallback,o=e.loading;return console.log("render SetPass"),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(p,{info:"pass",value:t,onChangeText:n})),a.a.createElement("div",null,a.a.createElement(p,{info:"pass confirm",value:r,onChangeText:c})),a.a.createElement("div",null,a.a.createElement(b,{info:"sign up",onClick:s,disabled:o},"setPass")))})),be=function(e){return{type:"setPass/SET_LOADING",loading:e}},ve=function(e){return{type:"setPass/SET_SUCCESS",success:e}},Ee=function(e){return{type:"setPass/SET_ERROR",error:e}},Oe={setPass:function(){var e=Object(y.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth/set-new-password",{resetPasswordToken:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},he=a.a.memo((function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),o=Object(i.a)(s,2),l=o[0],d=o[1],f=Object(F.g)().token,p=Object(u.b)(),m=Object(r.useCallback)((function(){return p(function(e,t,n){return function(){var r=Object(y.a)(j.a.mark((function r(a){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a(be(!0)),r.next=3,_(Object(y.a)(j.a.mark((function r(){var c;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t===n){r.next=4;break}a(Ee("Passwords don't match!")),r.next=9;break;case 4:return r.next=6,Oe.setPass(e,t);case 6:c=r.sent,a(ve(!0)),console.log("Nya, SetPass Success!",c);case 9:case"end":return r.stop()}}),r)}))),(function(e){return a(Ee(e))}),"SetPass");case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(f,n,l))}),[n,l,p]),g=Object(u.c)((function(e){return e.setPass})).loading;return console.log("render SetPassContainer"),a.a.createElement(ge,{pass:n,setPass:c,pass2:l,setPass2:d,setPassCallback:m,loading:g})})),ke=function(){var e=Object(u.c)((function(e){return e.setPass})),t=e.success,n=e.error,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(!0),f=Object(i.a)(d,2),p=f[0],m=f[1],g=Object(u.b)();return Object(r.useEffect)((function(){p?((n||t)&&g(Ee("")),m(!1)):t&&!o&&setTimeout((function(){return l(!0)}),500)}),[p,t,n,g,m,o,l]),console.log("render SetPassPage"),o&&t&&!p?a.a.createElement(F.a,{to:Le.LOGIN}):a.a.createElement("div",null,"setPass",a.a.createElement(me,{first:p}),a.a.createElement(he,null),a.a.createElement(O,{to:Le.LOGIN,info:"login in setPass"},"login"))},je={getPacks:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/cards/pack?pageCount=1000&page=4"+(t?"&user_id=".concat(t):"")+"&sortPacks=0updated");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addPack:function(){var e=Object(y.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/cards/pack",{cardsPack:{name:"new pack 2.0"}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updatePack:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put("/cards/pack",{cardsPack:{_id:t,name:"update new pack 2.0",deckCover:""}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePack:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delete("/cards/pack?id=".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ye=function(e){return{type:"packs/SET_PACKS",packs:e}},we=function(e){return{type:"packs/SET_PACK_USER_ID",packUser_id:e}},Se=function(){return function(){var e=Object(y.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().packs.packUser_id,e.next=3,_(Object(y.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.getPacks(r);case 2:n=e.sent,t(ye(n.cardPacks)),console.log("Nya, getPacks Success!",n);case 5:case"end":return e.stop()}}),e)}))),(function(e){}),"getPacks");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},xe=function(e){var t=e.loading,n=void 0!==t&&t,r=e.title,c=void 0===r?"table":r,s=e.model,o=e.data,u=e.headerStyle,i=e.tableStyle,l=e.rowsStyle,d=e.rowStyle;return a.a.createElement("div",{style:Object(C.a)({margin:"0 10px"},i)},c,a.a.createElement("div",{style:Object(C.a)({border:"1px solid red",width:"100%",display:"flex"},u)},s.map((function(e,t){return e.title(t,n)}))),a.a.createElement("div",{style:Object(C.a)({border:"1px solid lime",width:"100%"},l)},o.map((function(e,t){return a.a.createElement("div",{key:c+"-row-"+(e._id||t),style:Object(C.a)({width:"100%",display:"flex"},d)},s.map((function(r,a){return r.render(e,a,t,n)})))}))))},Ce=a.a.memo((function(){var e=Object(u.c)((function(e){return e.packs})),t=e.packs,n=e.packUser_id,c=Object(u.c)((function(e){return e.profile.user}))._id,s=Object(r.useState)(!!n),o=Object(i.a)(s,2),l=o[0],d=o[1],f=Object(u.b)();Object(r.useEffect)((function(){f(Se())}),[f]);var p,m,g,v=Object(r.useCallback)((function(e){f(we(l?"":c)),f(Se()),d(e.target.checked)}),[d,f,l,c]),E=(p=function(){return f(function(){var e=Object(y.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(Object(y.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.addPack();case 2:n=e.sent,t(Se()),console.log("Nya, addPack Success!",n);case 5:case"end":return e.stop()}}),e)}))),(function(e){}),"addPack");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},m=function(e){return f(function(e){return function(){var t=Object(y.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(Object(y.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.deletePack(e);case 2:r=t.sent,n(Se()),console.log("Nya, deletePack Success!",r);case 5:case"end":return t.stop()}}),t)}))),(function(e){}),"deletePack");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},g=function(e){return f(function(e){return function(){var t=Object(y.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(Object(y.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je.updatePack(e);case 2:r=t.sent,n(Se()),console.log("Nya, updatePack Success!",r);case 5:case"end":return t.stop()}}),t)}))),(function(e){}),"updatePack");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},[{title:function(e,t){return a.a.createElement("div",{key:"name-title-"+e,style:{width:150}},"Name")},render:function(e,t,n,r){return a.a.createElement("div",{key:"name-cell-"+e._id,style:{width:150}},e.name)}},{title:function(e,t){return a.a.createElement("div",{key:"cardsCount-title-"+e,style:{width:150}},"cardsCount")},render:function(e,t,n,r){return a.a.createElement("div",{key:"cardsCount-cell-"+e._id,style:{width:150}},e.cardsCount)}},{title:function(e,t){return a.a.createElement("div",{key:"updated-title-"+e,style:{width:150}},"updated")},render:function(e,t,n,r){return a.a.createElement("div",{key:"updated-cell-"+e._id,style:{width:150}},e.updated.slice(5,16))}},{title:function(e,t){return a.a.createElement("div",{key:"url-title-"+e,style:{width:150}},"url")},render:function(e,t,n,r){return a.a.createElement("div",{key:"url-cell-"+e._id,style:{width:150}},e.deckCover)}},{title:function(e,t){return a.a.createElement("div",{key:"buttons-title-"+e,style:{width:150}},a.a.createElement(b,{onClick:p},"add"))},render:function(e,t,n,r){return a.a.createElement("div",{key:"buttons-cell-"+e._id,style:{width:250}},a.a.createElement(b,{onClick:function(){return m(e._id)}},"del"),a.a.createElement(b,{onClick:function(){return g(e._id)}},"update"),a.a.createElement(O,{to:Le.CARDS+"/"+e._id},"cards"))}}]);return console.log("render PacksContainer"),a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement("input",{type:"checkbox",checked:l,onChange:v}),"my packs"),a.a.createElement(xe,{model:E,data:t,title:"CardPacks"}))})),_e=function(){return console.log("render PacksPage"),a.a.createElement("div",null,"PacksPage",a.a.createElement(Ce,null))},Pe={getCards:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/cards/card?cardsPack_id=".concat(t)+"&pageCount=1000");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addCard:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/cards/card",{card:{cardsPack_id:t,question:"new 2.0!",grade:5*Math.random(),questionImg:"some img"}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCard:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put("/cards/card",{card:{_id:t,question:"updated question",answerImg:"some answer img"}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteCard:function(){var e=Object(y.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.delete("/cards/card?&id=".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ne=function(e){return{type:"cards/SET_CARDS",cards:e}},Te=function(e){return function(){var t=Object(y.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(Object(y.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe.getCards(e);case 2:r=t.sent,n(Ne(r.cards)),console.log("Nya, getCards Success!",r);case 5:case"end":return t.stop()}}),t)}))),(function(e){}),"getCards");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Re=a.a.memo((function(){var e=Object(u.c)((function(e){return e.cards})).cards,t=Object(F.g)().id,n=Object(u.b)();Object(r.useEffect)((function(){n(Te(t))}),[n,t]);var c,s,o,i=(c=function(){return n(function(e){return function(){var t=Object(y.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(Object(y.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pe.addCard(e);case 2:r=t.sent,n(Te(e)),console.log("Nya, addCard Success!",r);case 5:case"end":return t.stop()}}),t)}))),(function(e){}),"addCard");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},s=function(e){return n(function(e,t){return function(){var n=Object(y.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_(Object(y.a)(j.a.mark((function n(){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pe.deleteCard(e);case 2:a=n.sent,r(Te(t)),console.log("Nya, deleteCard Success!",a);case 5:case"end":return n.stop()}}),n)}))),(function(e){}),"deleteCard");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e,t))},o=function(e){return n(function(e,t){return function(){var n=Object(y.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_(Object(y.a)(j.a.mark((function n(){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pe.updateCard(e);case 2:a=n.sent,r(Te(t)),console.log("Nya, updateCard Success!",a);case 5:case"end":return n.stop()}}),n)}))),(function(e){}),"updateCard");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e,t))},[{title:function(e,t){return a.a.createElement("div",{key:"question-title-"+e,style:{width:150}},"question")},render:function(e,t,n,r){return a.a.createElement("div",{key:"question-cell-"+e._id,style:{width:150}},e.question)}},{title:function(e,t){return a.a.createElement("div",{key:"answer-title-"+e,style:{width:150}},"answer")},render:function(e,t,n,r){return a.a.createElement("div",{key:"answer-cell-"+e._id,style:{width:150}},e.answer)}},{title:function(e,t){return a.a.createElement("div",{key:"grade-title-"+e,style:{width:150}},"Grade")},render:function(e,t,n,r){return a.a.createElement("div",{key:"grade-cell-"+e._id,style:{width:150}},e.grade.toFixed(10))}},{title:function(e,t){return a.a.createElement("div",{key:"updated-title-"+e,style:{width:150}},"updated")},render:function(e,t,n,r){return a.a.createElement("div",{key:"updated-cell-"+e._id,style:{width:150}},e.updated.slice(5,16))}},{title:function(e,t){return a.a.createElement("div",{key:"url-title-"+e,style:{width:150}},"url")},render:function(e,t,n,r){return a.a.createElement("div",{key:"url-cell-"+e._id,style:{width:150}},e.answerImg,a.a.createElement("div",null,e.answerVideo),a.a.createElement("div",null,e.questionImg),a.a.createElement("div",null,e.questionVideo),a.a.createElement("pre",null,e.comments))}},{title:function(e,t){return a.a.createElement("div",{key:"buttons-title-"+e,style:{width:150}},a.a.createElement(b,{onClick:c},"add"))},render:function(e,t,n,r){return a.a.createElement("div",{key:"buttons-cell-"+e._id,style:{width:250}},a.a.createElement(b,{onClick:function(){return s(e._id)}},"del"),a.a.createElement(b,{onClick:function(){return o(e._id)}},"update"))}}]);return console.log("render CardsContainer, id:"+t),a.a.createElement("div",null,a.a.createElement(xe,{model:i,data:e,title:"Cards"}))})),Ie=function(){return console.log("render CardsPage"),a.a.createElement("div",null,"PacksPage",a.a.createElement(Re,null))},Le={LOGIN:"/login",REGISTER:"/register",PROFILE:"/profile",FORGOT:"/forgot",SET_PASS:"/set-new-password",PACKS:"/packs",CARDS:"/cards"},Ue=[{_id:0,title:"main",path:"/",exact:!0,page:a.a.createElement(F.a,{to:Le.LOGIN})},{_id:1,title:"login",path:Le.LOGIN,exact:!0,page:a.a.createElement(q,null)},{_id:2,title:"register",path:Le.REGISTER,exact:!0,page:a.a.createElement(W,null)},{_id:3,title:"forgot",path:Le.FORGOT,exact:!0,page:a.a.createElement(pe,null)},{_id:4,title:"setPass",path:Le.SET_PASS,params:"/:token",exact:!0,page:a.a.createElement(ke,null)},{_id:7,title:"profile",path:Le.PROFILE,exact:!0,page:a.a.createElement(ce,null,a.a.createElement(ae,null))},{_id:8,title:"packs",path:Le.PACKS,exact:!0,page:a.a.createElement(ce,null,a.a.createElement(_e,null))},{_id:9,title:"cards",path:Le.CARDS,params:"/:id",exact:!0,page:a.a.createElement(ce,null,a.a.createElement(Ie,null))},{_id:9999,title:"error404",page:a.a.createElement("div",null,"error404")}],Ge=Ue.map((function(e){return a.a.createElement(O,{key:"navLink-"+e._id,to:(e.path||"/error404")+(e.params?"/1":""),info:"navLink-"+e._id},e.title)})),Ae=function(){return console.log("render DevHeader"),a.a.createElement(a.a.Fragment,null,Ge)},De=Ue.map((function(e){return a.a.createElement(F.b,{key:"route-"+e._id,path:e.path&&e.path+(e.params||""),exact:e.exact,render:function(){return e.page}})})),Fe=function(){return console.log("render Routes"),a.a.createElement(F.d,null,De)},qe=function(){return console.log("render Main"),a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,null),a.a.createElement(Fe,null))},Me=n(13),Be=n(38),Ke={loading:!1,success:!1,error:""},Ve={loading:!1,success:!1,error:""},$e={loading:!1,success:!1,error:""},He={loading:!1,success:!1,error:""},Je={packs:[],packUser_id:""},We={cards:[]},ze=Object(Me.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET_ERROR":return Object(C.a)({},e,{error:t.error,loading:!1,success:!1});case"login/SET_LOADING":return Object(C.a)({},e,{error:"",loading:t.loading,success:!1});case"login/SET_SUCCESS":return Object(C.a)({},e,{error:"",loading:!1,success:t.success});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register/SET_ERROR":return Object(C.a)({},e,{error:t.error,loading:!1,success:!1});case"register/SET_LOADING":return Object(C.a)({},e,{error:"",loading:t.loading,success:!1});case"register/SET_SUCCESS":return Object(C.a)({},e,{error:"",loading:!1,success:t.success});default:return e}},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"forgot/SET_ERROR":return Object(C.a)({},e,{error:t.error,loading:!1,success:!1});case"forgot/SET_LOADING":return Object(C.a)({},e,{error:"",loading:t.loading,success:!1});case"forgot/SET_SUCCESS":return Object(C.a)({},e,{error:"",loading:!1,success:t.success});default:return e}},setPass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setPass/SET_ERROR":return Object(C.a)({},e,{error:t.error,loading:!1,success:!1});case"setPass/SET_LOADING":return Object(C.a)({},e,{error:"",loading:t.loading,success:!1});case"setPass/SET_SUCCESS":return Object(C.a)({},e,{error:"",loading:!1,success:t.success});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/SET_USER":return Object(C.a)({},e,{user:t.user});case"profile/SET_ERROR":return Object(C.a)({},e,{error:t.error,loading:!1,success:!1});case"profile/SET_LOADING":return Object(C.a)({},e,{error:"",loading:t.loading,success:!1});case"profile/SET_SUCCESS":return Object(C.a)({},e,{error:"",loading:!1,success:t.success});default:return e}},packs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"packs/SET_PACKS":return Object(C.a)({},e,{packs:t.packs});case"packs/SET_PACK_USER_ID":return Object(C.a)({},e,{packUser_id:t.packUser_id});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"cards/SET_CARDS":return Object(C.a)({},e,{cards:t.cards});default:return e}}}),Qe=Object(Me.d)(ze,Object(Me.a)(Be.a)),Xe=Qe;window.store=Qe;var Ye=function(){return console.log("render App"),a.a.createElement("div",{className:"App"},a.a.createElement(o.a,null,a.a.createElement(u.a,{store:Xe},a.a.createElement(qe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.4fe59786.chunk.js.map